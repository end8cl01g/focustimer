<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Focus Timer</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="loading">
        <div class="spinner"></div>
    </div>

    <div id="app">
        <!-- Main Timer Section -->
        <div class="timer-section">
            <div class="timer-container">
                <svg class="progress-ring" width="200" height="200">
                    <circle class="ring-bg" cx="100" cy="100" r="90" />
                    <circle id="ring-progress" cx="100" cy="100" r="90" />
                </svg>
                <div id="timer-display">00:00</div>
            </div>
            <div class="active-task-info">
                <h2 id="active-title">Loading...</h2>
                <p id="active-schedule"></p>
            </div>
            <div class="controls">
                <button id="btn-toggle" class="btn-primary">START FOCUS</button>
            </div>
        </div>

        <!-- Subtasks Section -->
        <div id="subtasks-section" class="subtasks-section">
            <h3>Subtasks</h3>
            <div class="subtask-input-group">
                <input type="text" id="subtask-input" placeholder="Add a subtask..." onkeypress="handleSubtaskInput(event)">
                <button onclick="addSubtask()">+</button>
            </div>
            <ul id="subtask-list"></ul>
        </div>

        <!-- Task List Section -->
        <div class="list-section">
            <div class="list-header">
                <h3>Today's Schedule</h3>
                <button onclick="showModal()" class="btn-icon">+</button>
            </div>
            <div id="list-container"></div>
        </div>
    </div>

    <!-- Action Sheet for Renew -->
    <div id="action-sheet" class="action-sheet-overlay">
        <div class="action-sheet">
            <div class="action-header">Session Over</div>
            <button onclick="executeRenewNow()" class="action-btn">Renew for 1 Hour</button>
            <button onclick="executeRenewCustom()" class="action-btn">Custom Schedule</button>
            <button onclick="hideActionSheet()" class="action-btn cancel">Dismiss</button>
        </div>
    </div>

    <!-- Modal for New/Renew Task -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal">
            <h3 id="modal-title">New Focus Session</h3>
            <div class="form-group">
                <label>Title</label>
                <input type="text" id="input-title" placeholder="What are you focusing on?">
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Start</label>
                    <input type="datetime-local" id="input-start">
                </div>
                <div class="form-group">
                    <label>End</label>
                    <input type="datetime-local" id="input-end">
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="hideModal()" class="btn-secondary">Cancel</button>
                <button id="btn-book" class="btn-primary">Book</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
